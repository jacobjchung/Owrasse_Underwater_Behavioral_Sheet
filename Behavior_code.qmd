---
title: "Owrasse_Underwater_Behavior"
format: pdf
editor: visual
---

# Quick Intro

This quarto document contains the code used to visualize data from UW_Nest_Behavioral_Cleaned. The goals of this project is to understand what factors influence the mating decisions that female Ocellated wrasse make. What makes *Symphodus ocellatus* (the ocellated wrasse) interesting is their 3 different male reproductive tactics. Additionally, there are large amounts of mate choice copying from the females, so much so that a male is up significantly more likely to spawn with a female if she observes another female with him ([Alonzo 2008](https://www.sciencedirect.com/science/article/pii/S0003347208000225)).

The data used was collected live underwater by SCUBA divers in Corsica, Fr, in a 10 minute period.

# Tidy Code

First run our library list (Install first if you don't have these packages).

```{r}
#Install and library important packages
#install.packages('ggplot2')
#install.packages('RColorBrewer')
#install.packages('here')
#install.packages('tidyverse')
#install.packages('readxl')
#install.packages('brms')
library(tidyverse)
library(here)
library(ggplot2)
library(readxl)
library(dplyr)
library(brms)
library(RColorBrewer)
```

Importing the data sheet

```{r}
behavior_sheet <- read_excel("UW_Nest_Behavioral_Sheets_Cleaned.xlsx")
head(behavior_sheet)
```

Separating the date column and placing it near the original Date column for filtering ease later on.

```{r eval=FALSE}
behavior_sheet_date <- as.Date(behavior_sheet$Date)
behavior_sheet$Date <- behavior_sheet_date
behavior_sheet_sep <- behavior_sheet %>%
  mutate(Year = year(Date)) %>%
  mutate(Month = month(Date)) %>%
  mutate(Day = day(Date)) %>%
  relocate(Year, .after = Date) %>%
  relocate(Month, .after = Year) %>%
  relocate(Day, .after = Month)
head(behavior_sheet_sep)
```

## Year totals

For ease of comparison between years and months, this code will add up the total number of nests for each year.

```{r}
yearly_totals <- behavior_sheet_sep |>
  group_by(Year) |>
  summarise(
    # count the number of nests in each year
    total_nests = n(),
    # take the avg of the "Average SNK" column for each year and make new column
    avg_SNKR = mean(`Average SNK`, na.rm = TRUE),
          # include only numeric columns
    across(where(is.numeric) &
             # exclude Month, Day, and Average SNKR column
             !c(Month, Day, `Average SNK`), 
           # add up remaining totals per year for each column
           ~ sum(.x, na.rm = TRUE)))

yearly_totals

#Turn the year variable into a character for ease of comparison later on
year_date <- as.character(yearly_totals$Year) #Creates a vector with years as chr
yearly_totals$Year <- year_date #adjusts the tibble back

head(yearly_totals) #Double Check
```

### Exploratory graphs looking between the years

#### Average sneakers between years

```{r}
avg_snk_years <- yearly_totals |>
  ggplot(aes(x = Year, y = avg_SNKR, fill = Year)) + #gives ggplot the dimensions
           geom_bar(stat = 'identity') + 
  scale_x_discrete(breaks = c(2017, 2018, 2019, 2022, 2023, 2024, 2025)) + #Marks the x axis ticks
  labs(x = 'Year', 
       y = 'Average number of Sneakers',
       title = "Number of Sneakers Between the Years") + #edits axis and title labels
  theme_classic() + 
  theme(plot.title = element_text(hjust = 0.5)) + #Moves title to the middle
  scale_fill_brewer(palette = "Dark2") #Colors the bars
avg_snk_years
```

#### Average Nesting Male Time in/near nest between years

```{r}

```

#### Average SAT presence between years

```{r}

```

#### Total Female Visits between years

```{r}

```

#### Total Female spawns between years

```{r}

```

#### Total Nesting Male Spawns between years

This graph adds up all the columns that indicate Nesting male spawns and compares between the years

```{r}

```

#### Total Satellite Spawns between years

This graph adds up all the columns that indicate Satellite spawns and compares between the years.

```{r}

```

#### Total Sneaker Spawns between years

This graph adds up all the columns that indicate Sneaker male spawns and compares between the years.

```{r}

```

### Other, Not Year Specific, Exploratory graphs

#### Female visits and Female Spawns

Presumably, more visits should = more spawns is this true?

```{r}

```

#### Nesting Male aggression effect on Female visits and spawns

This adds up all the columns related to Nesting male aggression (Except aggression towards/away from nest, this will be graphed later) and looks for any correlation with female visits and spawns

```{r}

```

#### Satellite Male aggression effect on Female Visits and Spawns

This adds up all the columns related to Satellite male aggression (Except aggression towards/away from nest, this will be graphed later) and looks for any correlation with female visits and spawns

```{r}

```

#### Satellite and Nesting Male aggression to Females, away and towards the nest

We would expect any aggression to have negative impacts on female spawns, possibly also visits

```{r}

```

#### Sneaker Presence and Female Visits

From previous research it has been found that females use the presence of sneakers as a proxy for Nesting Male success, this graph will double check that

```{r}

```

#### Positive interactions between Satellite and Nesting Male and Female Visits and Spawns

This will add up the positive interactions occurring between the Satellite and Nesting Male (female passing)

```{r}

```

#### Negative interactions between Satellite and Nesting Male and Female Visits and Spawn

This does the same above, except with the negative interactions between Satellite and Nesting Male (SAT Submission to NM, NM aggression to SAT).

```{r}

```

#### Satellite and Nesting male interactions against sneakers effect on Female Visits and Spawns

Female prefer to not spawn with sneakers, thus higher Satellite and Nesting male aggression towards sneakers should increase the number of spawns. However, too many sneakers to chase means not enough time to spawn. This graph will let us see the relationship.

```{r}

```

#### Nesting male courtship and Female Visits and Spawns

```{r}

```

#### Does it matter who brings the female?

These graphs will look at the relationship between which male type brings the female and female spawning.

```{r}

```
