---
title: "DAG code"
format: pdf
editor: visual
---

## This markdown will contain the code used to create the directed acyclic graph created when thinking about this project

```{r}
#install and load packages
#install.packages('dagitty')
#install.packages('ggdag')
library(dagitty)
library(ggdag)
```

## Creating the DAG

Key:

FN - number of females near the nest

E1 - eggs in the nest

V - female visits the nest

OFS - other females spawn

FS - Female spawns

NMS - Nesting Male spawns

POSNK - presence of sneakers

NMAS - Nesting male aggression to the Satellite male

FDNS - Female does not spawn

NMASS - nesting male aggression to sneaker males

NMC - Nesting male courting

NMCA - Nesting male courtA

NMP - Nesting Male Presence

NMSPI - Nesting Male and Satellite POSNKitive interactions

NMSNI - Nesting Male and satellite negative interactions

SSH - Satellite shared spawn

SSNK - Satellite sneak spawn

SNS - Sneaker spawn

PD - Population density

SR - Sex Ration

POSA - Presence of satellite

SATC - Satellite courting

SATCA - Satellite courtA

```{r}
behavedag <- dagitty("dag {
FN -> E1
FN -> V 
FN -> OFS
E1 -> FS
FS -> NMS
V -> OFS
V -> POSNK
NMAS -> FDNS
NMASS-> FDNS
NMASS -> FS
NMASS -> POSNK
NMC -> FS
NMC -> V
NMC -> NMCA
NMCA -> FDNS
NMP -> V
NMP -> NMAS
NMP -> NMASS
NMP -> NMC
NMP -> NMCA
NMP -> NMSPI
NMP -> NMSNI
NMS -> SSH
NMS -> SSNK
NMS -> SNS
NMSPI -> FS
NMSPI -> SSH
NMSNI -> FDNS
NMSNI -> NMAS
OFS -> E1
OFS -> FS
PD -> SR
POSA -> V
POSA -> NMAS
POSA -> NMSPI
POSA -> NMSNI
POSA -> SATC
POSA -> SATCA
POSNK -> FDNS
POSNK -> NMSNI
POSNK -> SNS
SATC -> FS
SATC -> V
SATC -> NMSPI
SATC -> SATCA
SATCA -> FDNS
SR -> FN
SR -> NMP
SR -> POSA
SR -> POSNK
}")
behave_tidy_dag <- tidy_dagitty(behavedag)
behave_tidy_dag
```

Plot the DAG

```{r}
dag_plot <- ggdag(behave_tidy_dag, node_size = 10, text_size = 2.25, edge_cap = 0) +
  theme_dag()
dag_plot
```

## Dag 2

```{r}
behavedag2 <- dagitty('dag{
"Average Sneaker" -> "Female Visits Nest"
"Average Sneaker" -> "NM and SNK interactions"
"Average Sneaker" -> "Sneaker Brings to Nest"
"Female Visits Nest" -> "Female Spawns"
"NM and SAT positive interactions" -> "Female Spawns"
"NM and SAT positive interactions" -> "Satellite Passes to Nesting Male to Nest"
"NM and SNK interactions" -> "Female Visits Nest"
"Nesting Male Brings to Nest" -> "Female Spawns"
"Nesting Male Brings to Nest" -> "Female Visits Nest"
"Nesting Male Courtship" -> "Female Spawns"
"Nesting Male Courtship" -> "Female Visits Nest"
"Nesting Male Courtship" -> "Nesting Male Brings to Nest"
"Other Females" -> "Female Visits Nest"
"Satellite Brings to Nest" -> "Female Spawns"
"Satellite Brings to Nest" -> "Female Visits Nest"
"Satellite Passes to Nesting Male to Nest" -> "Female Spawns"
"Satellite Passes to Nesting Male to Nest" -> "Female Visits Nest"
"Satellite Presence" -> "NM and SAT positive interactions"
"Satellite Presence" -> "Satellite Brings to Nest"
"Satellite Presence" -> "Satellite Passes to Nesting Male to Nest"
"Sneaker Brings to Nest" -> "Female Visits Nest"
"Average Sneaker" [pos="0.124,0.588"]
"Female Spawns" [outcome,pos="0.752,0.51705"]
"Female Visits Nest" [pos="0.564,0.51705"]
"NM and SAT positive interactions" [pos="0.564,0.3885"]
"NM and SNK interactions" [pos="0.376,0.765"]
"Nesting Male Brings to Nest" [exposure,pos="0.376,0.712"]
"Nesting Male Courtship" [pos="0.376,0.659"]
"Other Females" [pos="0.376,0.51705"]
"Satellite Brings to Nest" [exposure,pos="0.376,0.330"]
"Satellite Passes to Nesting Male to Nest" [exposure,pos="0.376,0.447"]
"Satellite Presence" [pos="0.124,0.447"]
"Sneaker Brings to Nest" [exposure,pos="0.376,0.588"]
}')

behavedag2tidy <- tidy_dagitty(behavedag2)

dag_plot2 <- ggdag(behavedag2tidy, node_size = 12, text_size = .75, label_size = 1) +
  theme_dag()
dag_plot2
```
